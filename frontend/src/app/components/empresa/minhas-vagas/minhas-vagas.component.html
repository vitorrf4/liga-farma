<div class="candidatura-div">
  <h2>Minhas Vagas</h2>
  <button routerLink="/criar-vaga">Criar vaga</button>
</div>
<div class="vaga" *ngFor="let vaga of vagas">
  <h2>{{vaga.titulo}}</h2>
  <p>Empresa: {{vaga.farmacia.nome}}</p>
  <li>Local: {{vaga.cidade}} - {{vaga.estado}}</li>
  <li>Descricao: {{vaga.descricao}}</li>
  <li>Quantidade Vagas: {{vaga.quantidadeVagas}}</li>
  <li>Salario: {{vaga.salario | currency: 'BRL'}}</li>
  <li>Tipo: {{vaga.tipo}}</li>
  <li>Turno: {{vaga.turno}}</li>
  <li>Data publicada: {{vaga.dataPublicada | date: 'dd/MM/yyyy'}}</li>
  <li>Status: {{vaga.status}}</li>

  <div class="vaga-aberta" *ngIf="vaga.status == 'ABERTA'">
    <button (click)="fecharVaga(vaga)" class="btn-red">Fechar vaga</button>
  </div>

  <div class="vaga-candidaturas" *ngIf="vaga.candidaturas.length">
    <strong>Candidaturas</strong>

    <ul class="vaga-candidatura" *ngFor="let candidatura of vaga.candidaturas">
      <li><span>Candidato:</span> {{candidatura.farmaceutico.nome}}</li>
      <li><span>Mensagem:</span> {{candidatura.mensagem}}</li>

      <div *ngIf="candidatura.contrato; else enviar">
        <li><span>Status:</span> {{candidatura.contrato.status}}</li>
      </div>
      <ng-template #enviar>
        <button (click)="aceitarCandidatura(candidatura, vaga)">Aceitar candidatura</button>
      </ng-template>

    </ul>
  </div>
  <hr>
</div>
